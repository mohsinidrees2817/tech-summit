{"ast":null,"code":"import React, { useState, useEffect } from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { getDatabase, ref, child, push, update, get } from \"firebase/database\";\nimport { initializeApp } from \"firebase/app\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCUCPaQsUiPrHAp4-tYauq61IImNQWZ5QY\",\n  authDomain: \"blogger-app-90732.firebaseapp.com\",\n  projectId: \"blogger-app-90732\",\n  storageBucket: \"blogger-app-90732.appspot.com\",\n  messagingSenderId: \"604329570317\",\n  appId: \"1:604329570317:web:3e21c89c6c942646d6a544\",\n  measurementId: \"G-FQQ4H6YCD9\"\n};\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase(app);\nexport const addpost = async (postData, user) => {\n  const newPostKey = push(child(ref(db), \"posts\")).key;\n  try {\n    const updates = {};\n    updates[\"/posts/\" + newPostKey] = postData;\n    updates[\"/user-posts/\" + (user === null || user === void 0 ? void 0 : user.uid) + \"/\" + newPostKey] = postData;\n    toast.success(\"POST ADDED SUCCESFULLY!\");\n    return update(ref(db), updates);\n  } catch (error) {\n    console.error(\"Error adding post:\", error);\n    toast.error(\"Error adding post. Please try again.\");\n  }\n};\nexport const fetchUserPosts = (user, setUserposts) => {\n  const dbRef = ref(getDatabase(app));\n  get(child(dbRef, `user-posts/${user === null || user === void 0 ? void 0 : user.uid}`)).then(snapshot => {\n    if (snapshot.exists()) {\n      console.log(\"user posts\", snapshot.val());\n      setUserposts(snapshot.val());\n      // return snapshot.val();\n    } else {\n      console.log(\"No data available\");\n    }\n  }).catch(error => {\n    console.error(error);\n  });\n};\nexport const fetchAllPosts = setData => {\n  const dbRef = ref(getDatabase(app));\n  get(child(dbRef, `posts`)).then(snapshot => {\n    if (snapshot.exists()) {\n      console.log(\"all posts:\", snapshot.val());\n      setData(snapshot.val());\n      // return snapshot.val();\n    } else {\n      console.log(\"No data available\");\n    }\n  }).catch(error => {\n    console.error(error);\n  });\n};","map":{"version":3,"names":["React","useState","useEffect","ToastContainer","toast","getDatabase","ref","child","push","update","get","initializeApp","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","db","addpost","postData","user","newPostKey","key","updates","uid","success","error","console","fetchUserPosts","setUserposts","dbRef","then","snapshot","exists","log","val","catch","fetchAllPosts","setData"],"sources":["/Users/mohsinidrees/Desktop/techsummit/application/client/src/Helperfunctions/realtimedb.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { getDatabase, ref, child, push, update, get } from \"firebase/database\";\nimport { initializeApp } from \"firebase/app\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCUCPaQsUiPrHAp4-tYauq61IImNQWZ5QY\",\n  authDomain: \"blogger-app-90732.firebaseapp.com\",\n  projectId: \"blogger-app-90732\",\n  storageBucket: \"blogger-app-90732.appspot.com\",\n  messagingSenderId: \"604329570317\",\n  appId: \"1:604329570317:web:3e21c89c6c942646d6a544\",\n  measurementId: \"G-FQQ4H6YCD9\",\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase(app);\n\nexport const addpost = async (postData, user) => {\n  const newPostKey = push(child(ref(db), \"posts\")).key;\n  try {\n    const updates = {};\n    updates[\"/posts/\" + newPostKey] = postData;\n    updates[\"/user-posts/\" + user?.uid + \"/\" + newPostKey] = postData;\n    toast.success(\"POST ADDED SUCCESFULLY!\");\n    return update(ref(db), updates);\n  } catch (error) {\n    console.error(\"Error adding post:\", error);\n    toast.error(\"Error adding post. Please try again.\");\n  }\n};\n\nexport const fetchUserPosts = (user, setUserposts) => {\n  const dbRef = ref(getDatabase(app));\n  get(child(dbRef, `user-posts/${user?.uid}`))\n    .then((snapshot) => {\n      if (snapshot.exists()) {\n        console.log(\"user posts\", snapshot.val());\n        setUserposts(snapshot.val());\n        // return snapshot.val();\n      } else {\n        console.log(\"No data available\");\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n    });\n};\n\nexport const fetchAllPosts = (setData) => {\n  const dbRef = ref(getDatabase(app));\n  get(child(dbRef, `posts`))\n    .then((snapshot) => {\n      if (snapshot.exists()) {\n        console.log(\"all posts:\", snapshot.val());\n        setData(snapshot.val());\n        // return snapshot.val();\n      } else {\n        console.log(\"No data available\");\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n    });\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}